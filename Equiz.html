<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>English Grammar Quiz</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #1e3c72, #2a5298);
    color: white;
    text-align: center;
    margin: 0;
}

.container {
    max-width: 500px;
    margin: 60px auto;
    background: rgba(0,0,0,0.3);
    padding: 30px;
    border-radius: 15px;
}

button {
    padding: 10px 20px;
    margin: 10px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 16px;
    background: #00c6ff;
    color: white;
}

button:hover {
    background: #0072ff;
}

.option {
    display: block;
    width: 80%;
    margin: 8px auto;
}

#feedback {
    font-size: 20px;
    font-weight: bold;
    margin-top: 15px;
}

#scoreDisplay {
    margin-top: 10px;
    font-size: 16px;
}
</style>
</head>

<body>

<div class="container">

<div id="startScreen">
    <h2>English Grammar Quiz ðŸ’¡</h2>
    <p>Enter number of questions:</p>
    <input type="number" id="numQuestions" min="1">
    <br>
    <button onclick="startQuiz()">Start Quiz</button>
</div>

<div id="quizScreen" style="display:none;">
    <h3 id="questionText"></h3>
    <div id="options"></div>
    <div id="feedback"></div>
    <div id="scoreDisplay"></div>
</div>

<div id="resultScreen" style="display:none;">
    <h2 id="finalScore"></h2>
    <p>Play again?</p>
    <button onclick="restartQuiz()">Yes</button>
    <button onclick="endQuiz()">No</button>
</div>

</div>

<script>

const correctSound = new Audio("https://www.soundjay.com/buttons/sounds/button-3.mp3");
const wrongSound = new Audio("https://www.soundjay.com/buttons/sounds/beep-07.mp3");

const questions = [
    {text:"She ___ to school every day.", op1:"go", op2:"goes", op3:"going", correct:2},
    {text:"They ___ playing football.", op1:"is", op2:"are", op3:"am", correct:2},
    {text:"I have lived here ___ 2010.", op1:"since", op2:"for", op3:"from", correct:1},
    {text:"He ___ finished his homework.", op1:"has", op2:"have", op3:"had", correct:1},
    {text:"We ___ to the park yesterday.", op1:"go", op2:"went", op3:"gone", correct:2}
];

let selectedQuestions = [];
let currentIndex = 0;
let score = 0;

function shuffle(array) {
    return array.sort(() => Math.random() - 0.5);
}

function startQuiz() {
    const num = parseInt(document.getElementById("numQuestions").value);

    if (!num || num <= 0) {
        alert("Enter a valid number.");
        return;
    }

    selectedQuestions = shuffle([...questions]).slice(0, num);
    score = 0;
    currentIndex = 0;

    document.getElementById("startScreen").style.display = "none";
    document.getElementById("quizScreen").style.display = "block";

    loadQuestion();
}

function loadQuestion() {
    if (currentIndex >= selectedQuestions.length) {
        showResults();
        return;
    }

    const q = selectedQuestions[currentIndex];

    document.getElementById("questionText").innerText =
        `Question ${currentIndex + 1}: ${q.text}`;

    document.getElementById("feedback").innerText = "";
    document.getElementById("scoreDisplay").innerText =
        `Score: ${score} / ${selectedQuestions.length}`;

    const optionsDiv = document.getElementById("options");
    optionsDiv.innerHTML = "";

    [q.op1, q.op2, q.op3].forEach((opt, index) => {
        const btn = document.createElement("button");
        btn.innerText = opt;
        btn.className = "option";
        btn.onclick = () => checkAnswer(index + 1);
        optionsDiv.appendChild(btn);
    });
}

function checkAnswer(choice) {
    const q = selectedQuestions[currentIndex];
    const feedback = document.getElementById("feedback");

    // disable buttons
    document.querySelectorAll(".option").forEach(btn => btn.disabled = true);

    if (choice === q.correct) {
        score++;   // âœ… SCORE INCREASES HERE
        correctSound.play();
        feedback.innerText = "Correct!";
        feedback.style.color = "lightgreen";
    } else {
        wrongSound.play();
        feedback.innerText = "Incorrect!";
        feedback.style.color = "red";
    }

    currentIndex++;

    setTimeout(loadQuestion, 1500);
}

function showResults() {
    document.getElementById("quizScreen").style.display = "none";
    document.getElementById("resultScreen").style.display = "block";

    document.getElementById("finalScore").innerText =
        `Final Score: ${score} / ${selectedQuestions.length}`;
}

function restartQuiz() {
    document.getElementById("resultScreen").style.display = "none";
    document.getElementById("startScreen").style.display = "block";
}

function endQuiz() {
    document.getElementById("resultScreen").innerHTML =
        "<h2>Thanks for playing! ðŸŽ‰</h2>";
}

</script>

</body>
</html>
